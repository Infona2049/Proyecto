{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro - EcoFact</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="{% static 'img/favicon.png.png' %}" type="image/png">
  <link rel="stylesheet" href="{% static 'core/css/registro.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<div class="form-content">
  <img class="logo" src="{% static 'img/Logo azul sin fondo.png' %}" alt="Logo EcoFact">

  <!-- Contenedor oculto para mensajes de Django -->
  {% if messages %}
    <div id="django-messages" style="display: none;">
      {% for message in messages %}
        <div class="message-item" data-type="{{ message.tags }}" data-text="{{ message|escapejs }}"></div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Mostrar errores de formulario -->
  {% if form.errors %}
    <div class="alert alert-error">
      <strong>Por favor corrige los siguientes errores:</strong>
      <ul>
        {% for field, errors in form.errors.items %}
          {% for error in errors %}
            <li>{{ error }}</li>
          {% endfor %}
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    <div class="form-grid">
      <!-- Columna izquierda -->
      <div class="form-col">
        {{ form.nombre_usuario }}
        {{ form.segundo_nombre_usuario }}
        {{ form.apellido_usuario }}
        {{ form.segundo_apellido_usuario }}
        {{ form.tipo_documento_usuario }}
        {{ form.numero_documento_usuario }}
      </div>

      <!-- Columna derecha -->
      <div class="form-col">
        {{ form.correo_electronico_usuario }}
        {{ form.direccion_usuario }}
        {{ form.telefono_usuario }}

        <div class="password-container">
          {{ form.password1 }}
          <button type="button" id="togglePassword" class="toggle-password">
            <i class="fa-solid fa-eye"></i>
          </button>
        </div>

        <!-- Requisitos de contraseña -->
        <div class="password-requirements" id="passwordRequirements" style="display: none;">
          <p style="font-size: 12px; margin: 5px 0; font-weight: bold; color: #003f87;">La contraseña debe contener:</p>
          <ul style="font-size: 11px; margin: 5px 0; padding-left: 20px;">
            <li id="req-length" class="req-invalid">✗ Mínimo 8 caracteres</li>
            <li id="req-uppercase" class="req-invalid">✗ Una letra mayúscula (A-Z)</li>
            <li id="req-lowercase" class="req-invalid">✗ Una letra minúscula (a-z)</li>
            <li id="req-number" class="req-invalid">✗ Un número (0-9)</li>
            <li id="req-special" class="req-invalid">✗ Un carácter especial (!@#$%^&*)</li>
          </ul>
        </div>

        <div class="password-container">
          {{ form.password2 }}
          <button type="button" id="toggleConfirmPassword" class="toggle-password">
            <i class="fa-solid fa-eye"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Campos ocultos -->
    {{ form.username }}
    {{ form.rol_usuario }}

    <!-- Términos y Condiciones -->
    <div class="terminos-container">
      <label class="checkbox-container">
        <input type="checkbox" id="aceptarTerminos">
        <span class="checkmark"></span>
        <span class="terminos-texto">
          Acepto los 
          <a href="#" id="linkTerminos" class="link-terminos">Términos y Condiciones</a> 
          y la 
          <a href="#" id="linkPoliticas" class="link-terminos">Política de Privacidad</a>
        </span>
      </label>
    </div>

    <!-- Botón centrado -->
    <button type="submit" class="boton2">Registrarse</button>

    <p class="registro">¿Ya tienes cuenta? 
      <a href="{% url 'login' %}"><u>Inicia sesión aquí</u></a>
    </p>
  </form>
</div>

<!-- Modal de Términos y Condiciones -->
<div id="modalTerminos" class="modal">
  <div class="modal-content">
    <span class="close" data-modal="modalTerminos">&times;</span>
    <h2>Términos y Condiciones de Uso - EcoFact</h2>
    <div class="modal-body">
      <p><strong>Última actualización: 25 de noviembre de 2025</strong></p>
      
      <h3>1. Aceptación de los Términos</h3>
      <p>Al registrarse y utilizar EcoFact, usted acepta estar sujeto a estos Términos y Condiciones. Si no está de acuerdo con alguna parte de estos términos, no debe usar nuestro servicio.</p>
      
      <h3>2. Descripción del Servicio</h3>
      <p>EcoFact es un sistema de facturación electrónica que permite a los usuarios crear, gestionar y enviar facturas electrónicas de acuerdo con las normativas vigentes en Colombia.</p>
      
      <h3>3. Registro y Cuenta de Usuario</h3>
      <p>Para utilizar EcoFact, debe registrarse proporcionando información precisa y completa. Usted es responsable de:</p>
      <ul>
        <li>Mantener la confidencialidad de su contraseña</li>
        <li>Todas las actividades que ocurran bajo su cuenta</li>
        <li>Notificar inmediatamente cualquier uso no autorizado de su cuenta</li>
      </ul>
      
      <h3>4. Uso Permitido</h3>
      <p>El usuario se compromete a utilizar EcoFact únicamente para:</p>
      <ul>
        <li>Generar facturas electrónicas legítimas y válidas</li>
        <li>Gestionar su inventario de productos</li>
        <li>Consultar el historial de facturas emitidas</li>
      </ul>
      
      <h3>5. Uso Prohibido</h3>
      <p>Está estrictamente prohibido:</p>
      <ul>
        <li>Generar facturas fraudulentas o con información falsa</li>
        <li>Compartir credenciales de acceso con terceros</li>
        <li>Intentar acceder al sistema de manera no autorizada</li>
        <li>Usar el servicio para actividades ilegales</li>
      </ul>
      
      <h3>6. Facturación Electrónica</h3>
      <p>Las facturas generadas a través de EcoFact tienen validez legal conforme a la normativa colombiana de facturación electrónica. El usuario es responsable de la veracidad de la información contenida en cada factura.</p>
      
      <h3>7. Propiedad Intelectual</h3>
      <p>Todo el contenido, diseño, logotipos y software de EcoFact son propiedad de Apple S.A.S y están protegidos por las leyes de propiedad intelectual.</p>
      
      <h3>8. Limitación de Responsabilidad</h3>
      <p>EcoFact no será responsable por:</p>
      <ul>
        <li>Pérdida de datos debido a fallas técnicas</li>
        <li>Interrupciones del servicio por mantenimiento</li>
        <li>Errores en facturas generadas por información incorrecta del usuario</li>
      </ul>
      
      <h3>9. Modificaciones del Servicio</h3>
      <p>Nos reservamos el derecho de modificar o discontinuar el servicio en cualquier momento, con o sin previo aviso.</p>
      
      <h3>10. Terminación</h3>
      <p>Podemos suspender o terminar su cuenta si se detecta violación de estos términos, uso fraudulento o actividad sospechosa.</p>
      
      <h3>11. Legislación Aplicable</h3>
      <p>Estos términos se rigen por las leyes de la República de Colombia. Cualquier disputa se resolverá en los tribunales competentes de Colombia.</p>
      
      <h3>12. Contacto</h3>
      <p>Para cualquier pregunta sobre estos términos, contacte a: <strong>ecofactproyect@gmail.com</strong></p>
    </div>
    <button class="modal-btn" onclick="cerrarModal('modalTerminos')">Cerrar</button>
  </div>
</div>

<!-- Modal de Política de Privacidad -->
<div id="modalPoliticas" class="modal">
  <div class="modal-content">
    <span class="close" data-modal="modalPoliticas">&times;</span>
    <h2>Política de Privacidad - EcoFact</h2>
    <div class="modal-body">
      <p><strong>Última actualización: 25 de noviembre de 2025</strong></p>
      
      <h3>1. Introducción</h3>
      <p>EcoFact protege la privacidad y seguridad de los datos personales de sus usuarios. Al utilizar el sistema, usted acepta las prácticas descritas en estas Políticas de Privacidad.</p>

      <h3>2. Información que Recolectamos</h3>
      <p>Recolectamos los siguientes tipos de información:</p>
      <ul>
        <li><strong>Datos de Registro:</strong> Nombre, correo, identificación, contraseña, rol del usuario.</li>
        <li><strong>Datos del Sistema:</strong> Facturas creadas, historial, productos, movimientos de sesión.</li>
        <li><strong>Datos Técnicos:</strong> Dirección IP, fecha y hora de acceso, dispositivo utilizado.</li>
      </ul>

      <h3>3. Uso de la Información</h3>
      <p>La información recopilada se utiliza para:</p>
      <ul>
        <li>Garantizar el acceso seguro al sistema</li>
        <li>Administrar roles y usuarios</li>
        <li>Crear y consultar facturas</li>
        <li>Mantener la seguridad de la plataforma</li>
        <li>Enviar notificaciones de uso y recuperación de contraseña</li>
      </ul>
      <p>EcoFact <strong>no comparte, vende ni alquila</strong> información personal a terceros.</p>

      <h3>4. Seguridad de los Datos</h3>
      <ul>
        <li>Contraseñas encriptadas</li>
        <li>Control de roles y permisos</li>
        <li>Backups periódicos</li>
        <li>Restricción de acceso según rol</li>
        <li>Monitoreo de intentos sospechosos</li>
      </ul>

      <h3>5. Derechos del Usuario</h3>
      <ul>
        <li>Acceder a su información</li>
        <li>Solicitar correcciones</li>
        <li>Recuperar contraseña</li>
        <li>Solicitar eliminación de cuenta (con autorización del administrador)</li>
        <li>Conocer el uso de su información</li>
      </ul>

      <h3>6. Almacenamiento y Conservación</h3>
      <p>EcoFact almacena los datos durante el tiempo que:</p>
      <ul>
        <li>La cuenta permanezca activa</li>
        <li>Sea requerido por obligaciones legales de facturación</li>
        <li>Sea necesario para el funcionamiento del sistema</li>
      </ul>

      <h3>7. Responsabilidad del Usuario</h3>
      <ul>
        <li>Proteger su contraseña</li>
        <li>No compartir credenciales</li>
        <li>Usar el sistema de forma correcta según su rol</li>
        <li>Notificar accesos no autorizados</li>
      </ul>

      <h3>8. Modificaciones a las Políticas</h3>
      <p>EcoFact podrá actualizar estas políticas. Se notificará a los usuarios dentro del sistema.</p>

      <h3>9. Contacto</h3>
      <p>
        <strong>Administrador del Sistema EcoFact</strong><br>
        <strong>Correo:</strong> administrador123@ecofact.com
      </p>

    </div>
    <button class="modal-btn" onclick="cerrarModal('modalPoliticas')">Cerrar</button>
  </div>
</div>

<script src="{% static 'core/js/registro.js' %}"></script>

</body>
</html>